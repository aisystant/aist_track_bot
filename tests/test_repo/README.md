# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫–æ–¥–∞ —Ç—Ä—ë–º —É—Ä–æ–≤–Ω—è–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: **–°—Ü–µ–Ω–∞—Ä–∏–∏**, **–ü—Ä–æ—Ü–µ—Å—Å—ã**, **–î–∞–Ω–Ω—ã–µ**.

## –¢—Ä–∏ —É—Ä–æ–≤–Ω—è –ø—Ä–æ–≤–µ—Ä–æ–∫

| –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç | –§–∞–π–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
|---------|---------------|-----------------|----------------------|
| **–°—Ü–µ–Ω–∞—Ä–∏–∏** | UI/UX –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º | `requirements-scenarios.yaml` | `docs/scenarios/` |
| **–ü—Ä–æ—Ü–µ—Å—Å—ã** | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ | `requirements-processes.yaml` | `docs/processes/` |
| **–î–∞–Ω–Ω—ã–µ** | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –∏ –º–µ—Ç—Ä–∏–∫–∏ | `requirements-data.yaml` | `docs/data/` |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/test_repo/
‚îú‚îÄ‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ requirements-scenarios.yaml    # –¢–ó: —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚Üí –∫–æ–¥
‚îú‚îÄ‚îÄ requirements-processes.yaml    # –¢–ó: –ø—Ä–æ—Ü–µ—Å—Å—ã ‚Üí –∫–æ–¥
‚îú‚îÄ‚îÄ requirements-data.yaml         # –¢–ó: —Ç–∞–±–ª–∏—Ü—ã ‚Üí db/models.py
‚îú‚îÄ‚îÄ scripts/                       # –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ checker.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ code_analyzer.py           # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä AST/regex
‚îÇ   ‚îî‚îÄ‚îÄ report_generator.py        # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á—ë—Ç–æ–≤
‚îî‚îÄ‚îÄ reports/                       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫
    ‚îî‚îÄ‚îÄ YYYY-MM-DD-compliance.md
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
python -m tests.test_repo.scripts.checker

# –¢–æ–ª—å–∫–æ —Å—Ü–µ–Ω–∞—Ä–∏–∏
python -m tests.test_repo.scripts.checker --type scenarios

# –¢–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å—ã
python -m tests.test_repo.scripts.checker --type processes

# –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
python -m tests.test_repo.scripts.checker --type data

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
python -m tests.test_repo.scripts.checker -v

# JSON –≤—ã–≤–æ–¥ (–¥–ª—è CI/CD)
python -m tests.test_repo.scripts.checker --json
```

## –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

### –û–±—â–∞—è

| –°—Ç–∞—Ç—É—Å | –£—Å–ª–æ–≤–∏–µ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è |
|--------|---------|---------------|
| üü¢ | –í—Å–µ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è ‚â• 90% | –ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| üü° | –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å 70-89% | –ï—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ |
| üî¥ | –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å < 70% | –°–µ—Ä—å—ë–∑–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è |

### –ü–æ —É—Ä–æ–≤–Ω—è–º

| –£—Ä–æ–≤–µ–Ω—å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ |
|---------|-------------|-------------------|
| –°—Ü–µ–Ω–∞—Ä–∏–∏ | critical = 100% | –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã |
| –ü—Ä–æ—Ü–µ—Å—Å—ã | critical = 100% | –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã |
| –î–∞–Ω–Ω—ã–µ | 95% | –°—Ö–µ–º–∞ –ë–î –¥–æ–ª–∂–Ω–∞ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å |

## –§–∞–π–ª—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### requirements-scenarios.yaml

–ú–∞–ø–ø–∏–Ω–≥ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –∫–æ–¥:

```yaml
class_1_registration:
  scenarios:
    - id: "1.1"
      name: "–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞"
      priority: critical
      checks:
        - type: handler
          file: "bot.py"
          name: "cmd_start"
```

### requirements-processes.yaml

–ú–∞–ø–ø–∏–Ω–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ ‚Üí –∫–æ–¥:

```yaml
process_01_activity_tracking:
  id: "P-01"
  name: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
  doc: "docs/processes/process-01-activity-tracking.md"
  checks:
    - type: function
      file: "db/queries/activity.py"
      name: "record_active_day"
  data_writes:
    - table: "activity_log"
      fields: ["chat_id", "activity_date"]
```

### requirements-data.yaml

–ú–∞–ø–ø–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö ‚Üí db/models.py:

```yaml
table_interns:
  name: "interns"
  doc_section: "interns (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)"
  required_fields:
    - name: "chat_id"
      type: "BIGINT"
      constraint: "PRIMARY KEY"
```

## –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–æ–∫

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –£—Ä–æ–≤–Ω–∏ |
|-----|----------|--------|
| `function` | –ù–∞–ª–∏—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ | –°—Ü–µ–Ω–∞—Ä–∏–∏, –ü—Ä–æ—Ü–µ—Å—Å—ã |
| `handler` | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º | –°—Ü–µ–Ω–∞—Ä–∏–∏ |
| `state` | –ö–ª–∞—Å—Å/–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏—è | –°—Ü–µ–Ω–∞—Ä–∏–∏ |
| `constant` | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | –°—Ü–µ–Ω–∞—Ä–∏–∏ |
| `localization` | –ö–ª—é—á–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ | –°—Ü–µ–Ω–∞—Ä–∏–∏ |
| `pattern` | Regex-–ø–∞—Ç—Ç–µ—Ä–Ω | –í—Å–µ |
| `table` | –ù–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ models.py | –î–∞–Ω–Ω—ã–µ |
| `field` | –ù–∞–ª–∏—á–∏–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ | –î–∞–Ω–Ω—ã–µ |
| `constraint` | –ù–∞–ª–∏—á–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –î–∞–Ω–Ω—ã–µ |

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

### GitHub Actions

Workflow: `.github/workflows/scenario-compliance.yml`

```yaml
name: Documentation Compliance Check
on:
  schedule:
    - cron: '0 3 * * *'  # 06:00 MSK
  workflow_dispatch:
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

### –ù–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –î–æ–±–∞–≤–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ `docs/scenarios/`
2. –û–±–Ω–æ–≤–∏—Ç—å `requirements-scenarios.yaml`

### –ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å

1. –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ `docs/processes/`
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `requirements-processes.yaml`

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞/–ø–æ–ª–µ

1. –û–±–Ω–æ–≤–∏—Ç—å `docs/data/tables.md`
2. –î–æ–±–∞–≤–∏—Ç—å –≤ `requirements-data.yaml`
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `db/models.py` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç

## –°–≤—è–∑—å —Å –æ–Ω—Ç–æ–ª–æ–≥–∏–µ–π

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –°—Ü–µ–Ω–∞—Ä–∏–∏, –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –î–∞–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ `docs/ontology.md` (—Ä–∞–∑–¥–µ–ª 8).

| –í–æ–ø—Ä–æ—Å | –ö–∞—Ç–µ–≥–æ—Ä–∏—è |
|--------|-----------|
| ¬´–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?¬ª | –°—Ü–µ–Ω–∞—Ä–∏–π |
| ¬´–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏?¬ª | –ü—Ä–æ—Ü–µ—Å—Å |
| ¬´–ì–¥–µ —ç—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è?¬ª | –î–∞–Ω–Ω—ã–µ |

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install pyyaml
```

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞: `ast`, `re`, `pathlib`, `dataclasses`, `datetime`, `json`, `argparse`
