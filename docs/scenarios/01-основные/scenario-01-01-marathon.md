# 01.01 ะกัะตะฝะฐัะธะน ะะฐัะฐัะพะฝะฐ

> ะะพะปะฝะพะต ะพะฟะธัะฐะฝะธะต ะฟัะพัะตััะฐ 14-ะดะฝะตะฒะฝะพะน ะฟัะพะณัะฐะผะผั ะพะฑััะตะฝะธั ั ัะพัะบะธ ะทัะตะฝะธั ะฟะพัะพะบะฐ ัะพะพะฑัะตะฝะธะน, ะดะฐะฝะฝัั ะธ ะฟัะพะณัะตััะฐ.

---

## ะะฑะทะพั

| ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
|----------|----------|
| ะะปะธัะตะปัะฝะพััั | 14 ะดะฝะตะน |
| ะขะตะผ ะฒ ะดะตะฝั | 2 (ะฃัะพะบ + ะะฐะดะฐะฝะธะต) |
| ะัะตะณะพ ัะตะผ | 28 |
| ะะฐะบั. ัะตะผ ะฒ ะดะตะฝั | 4 (ะดะปั ะฝะฐะฒะตััััะฒะฐะฝะธั) |
| ะฃัะฐััะฝะธะบ | ะฃัะตะฝะธะบ |

---

## 1. ะะฝะฑะพัะดะธะฝะณ (ะะตะณะธัััะฐัะธั)

### ะะฐะฟััะบ

ะะพะผะฐะฝะดะฐ `/start` ะทะฐะฟััะบะฐะตั 8-ัะฐะณะพะฒัะน ะพะฝะฑะพัะดะธะฝะณ.

### ะจะฐะณะธ ะพะฝะฑะพัะดะธะฝะณะฐ

| ะจะฐะณ | ะกะพะพะฑัะตะฝะธะต ะฑะพัะฐ | ะขะธะฟ | ะงัะพ ัะพััะฐะฝัะตััั |
|-----|----------------|-----|-----------------|
| 1 | ะะฐะบ ะฒะฐั ะทะพะฒัั? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `name` |
| 2 | ะงะตะผ ะฒั ะทะฐะฝะธะผะฐะตัะตัั? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `occupation` |
| 3 | ะะฐะบะธะต ะธะฝัะตัะตัั/ัะพะฑะฑะธ? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `interests` (JSON) |
| 4 | ะงัะพ ะดะปั ะฒะฐั ะฒะฐะถะฝะพ ะฒ ะถะธะทะฝะธ? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `motivation` |
| 5 | ะงัะพ ะฒั ัะพัะธัะต ะธะทะผะตะฝะธัั? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `goals` |
| 6 | ะกะบะพะปัะบะพ ะผะธะฝัั ะฝะฐ ะพะดะฝั ัะตะผั? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `study_duration` (5/15/25) |
| 7 | ะะพ ัะบะพะปัะบะพ ะฟัะธััะปะฐัั ะฝะฐะฟะพะผะธะฝะฐะฝะธั? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `schedule_time` (HH:MM) |
| 8 | ะะพะณะดะฐ ะฝะฐัะฐัั ะผะฐัะฐัะพะฝ? | ะะฐะฟัะพั ะดะฐะฝะฝัั | `marathon_start_date` |

### ะะฐะฒะตััะตะฝะธะต ะพะฝะฑะพัะดะธะฝะณะฐ

```
ะะพั โ ะกะฒะพะดะบะฐ: ะัะพัะธะปั
      "ะะฐั ะฟัะพัะธะปั: {name}, {occupation}..."
      [ะะฝะพะฟะบะฐ: ะะพะดัะฒะตัะดะธัั]

ะฃัะตะฝะธะบ โ ะะฐะถะธะผะฐะตั "ะะพะดัะฒะตัะดะธัั"

ะะพั โ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
      "ะัะพัะธะปั ัะพััะฐะฝัะฝ! ะัะฟะพะปัะทัะนัะต /learn ะดะปั ะฝะฐัะฐะปะฐ."
```

### ะกะพััะฐะฝัะตะผัะต ะดะฐะฝะฝัะต

**ะขะฐะฑะปะธัะฐ `interns`:**
```
chat_id, name, occupation, interests, motivation, goals,
study_duration, schedule_time, marathon_start_date,
language, onboarding_completed = TRUE,
marathon_status = 'not_started'
```

---

## 2. ะกัััะบัััะฐ ะดะฝั ะะฐัะฐัะพะฝะฐ

### ะคะพัะผัะปะฐ

```
ะะตะฝั N = ะฃัะพะบ (ัะตะพัะธั) + ะะฐะดะฐะฝะธะต (ะฟัะฐะบัะธะบะฐ)
```

ะะฐะถะดัะน ะดะตะฝั ัะพะดะตัะถะธั ัะพะฒะฝะพ 2 ัะตะผั:
- **ะงััะฝัะน ะธะฝะดะตะบั** (0, 2, 4...) โ ะฃัะพะบ
- **ะะตัััะฝัะน ะธะฝะดะตะบั** (1, 3, 5...) โ ะะฐะดะฐะฝะธะต

### ะัะธะผะตั ััััะบัััั

| ะะตะฝั | ะะฝะดะตะบัั ัะตะผ | ะฃัะพะบ | ะะฐะดะฐะฝะธะต |
|------|-------------|------|---------|
| 1 | 0, 1 | ะงะตัััะต ัะพััะพัะฝะธั | ะะพั ัะตะบััะตะต ัะพััะพัะฝะธะต |
| 2 | 2, 3 | ะัะฐะบัะธะบะธ ัะฐะทะฒะธัะธั | ะกะปะพั ะดะปั ะฟัะฐะบัะธะบะธ |
| ... | ... | ... | ... |
| 14 | 26, 27 | ะัะพะณะพะฒัะน ััะพะบ | ะัะพะณะพะฒะพะต ะทะฐะดะฐะฝะธะต |

---

## 3. ะะพะปะฝะฐั ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ัะพะพะฑัะตะฝะธะน ะดะฝั

### ะะธะฐะณัะฐะผะผะฐ ะฟะพัะพะบะฐ

```
[ะฃัะตะฝะธะบ]                              [ะะพั]

/learn โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโบ ะัะพะฒะตัะบะฐ: ะตััั ะปะธ ะดะพัััะฟะฝัะต ัะตะผั?
                                      โ
                                      ะะฐัะตัะธะฐะป ััะพะบะฐ
                                      "๐ ะะตะฝั N: {ะฝะฐะทะฒะฐะฝะธะต}"
                                      [ัะตะพัะตัะธัะตัะบะธะน ัะตะบัั]

                                      ะะพะฟัะพั ััะพะบะฐ (ะกะปะพะถะฝะพััั N)
                                      "๐ญ {ะฒะพะฟัะพั ะฟะพ ัะตะพัะธะธ}"

ะัะฒะตั ะฝะฐ ััะพะบ (โฅ20 ัะธะผะฒ.) โโโโโโโโโโโบ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
                                      "โ ะัะฒะตั ะฟัะธะฝัั"

                                      [ะัะปะธ ะกะปะพะถะฝะพััั < 3]
                                      ะะพะฝััะฝัะน ะฒะพะฟัะพั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
                                      "๐ ะฅะพัะธัะต ะฒะพะฟัะพั ะฟะพัะปะพะถะฝะตะต?"
                                      [ะะฐ] [ะะตั]

[ะะฐัะธะฐะฝั ะ: ะะตั/ะธะณะฝะพั] โโโโโโโโโโโโโโบ ะะฐัะตัะธะฐะป ะทะฐะดะฐะฝะธั
                                      "๐ ะะฐะดะฐะฝะธะต: {ะฝะฐะทะฒะฐะฝะธะต}"
                                      [ะธะฝััััะบัะธั ะบ ะฟัะฐะบัะธะบะต]

                                      ะะฐะฟัะพั ะดะฐะฝะฝัั
                                      "ะะพะณะดะฐ ะทะฐะฒะตััะธัะต, ะฝะฐะฟะธัะธัะต ะฝะฐะทะฒะฐะฝะธะต ะะ"

[ะะฐัะธะฐะฝั ะ: ะะฐ] โโโโโโโโโโโโโโโโโโโโโบ ะะพะฝััะฝัะน ะฒะพะฟัะพั (ะกะปะพะถะฝะพััั N+1)
                                      "๐ฏ {ัะปะพะถะฝัะน ะฒะพะฟัะพั}"

ะัะฒะตั ะฝะฐ ะฑะพะฝัั (โฅ20 ัะธะผะฒ.) โโโโโโโโโโบ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
                                      "โ ะะพะฝัั ะทะฐััะธัะฐะฝ!"

                                      ะะฐัะตัะธะฐะป ะทะฐะดะฐะฝะธั
                                      [ัะผ. ะฒััะต]

ะัะฒะตั ะฝะฐ ะทะฐะดะฐะฝะธะต (โฅ3 ัะธะผะฒ.) โโโโโโโโโบ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
                                      "โ ะัะฐะบัะธะบะฐ ะทะฐััะธัะฐะฝะฐ!"

                                      ะกะฒะพะดะบะฐ: ะกัะฐัะธััะธะบะฐ
                                      "๐ ะะตะฝั N ะทะฐะฒะตัััะฝ!"
                                      "ะขะตะพัะธั โ ะัะฐะบัะธะบะฐ โ"
```

---

## 4. ะัะต ัะธะฟั ัะพะพะฑัะตะฝะธะน

### ะั ะฑะพัะฐ ะบ ะฃัะตะฝะธะบั

| ะขะธะฟ | ะะพะดัะธะฟ | ะะพะณะดะฐ ะพัะฟัะฐะฒะปัะตััั | ะัะธะผะตั |
|-----|--------|-------------------|--------|
| **ะะฐัะตัะธะฐะป** | ะะฐัะตัะธะฐะป ััะพะบะฐ | ะะพัะปะต `/learn`, ะตัะปะธ ัะปะตะดัััะฐั ัะตะผะฐ โ ััะพะบ | ะขะตะพัะตัะธัะตัะบะธะน ัะตะบัั |
| **ะะฐัะตัะธะฐะป** | ะะฐัะตัะธะฐะป ะทะฐะดะฐะฝะธั | ะะพัะปะต ะพัะฒะตัะฐ ะฝะฐ ััะพะบ | ะะฝััััะบัะธั ะบ ะฟัะฐะบัะธะบะต |
| **ะะพะฟัะพั** | ะะพะฟัะพั ััะพะบะฐ | ะกัะฐะทั ะฟะพัะปะต ะผะฐัะตัะธะฐะปะฐ ััะพะบะฐ | "ะ ััะผ ัะฐะทะฝะธัะฐ ะผะตะถะดั...?" |
| **ะะพะฟัะพั** | ะะพะฝััะฝัะน ะฒะพะฟัะพั | ะะพัะปะต ะพัะฒะตัะฐ ะฝะฐ ััะพะบ (ะพะฟัะธะพะฝะฐะปัะฝะพ) | "ะัะธะฒะตะดะธัะต ะฟัะธะผะตั ะธะท ะถะธะทะฝะธ..." |
| **ะะฑัะฐัะฝะฐั ัะฒัะทั** | ะะพะฝััะปััะฐัะธั | ะะฐ ะฒะพะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั | ะัะฒะตั ัะตัะตะท MCP |
| **ะะฐะฟัะพั** | ะะฐะฟัะพั ะดะฐะฝะฝัั | ะะพัะปะต ะผะฐัะตัะธะฐะปะฐ ะทะฐะดะฐะฝะธั | "ะะฐะฟะธัะธัะต ะฝะฐะทะฒะฐะฝะธะต ะะ" |
| **ะกะฒะพะดะบะฐ** | ะัะพัะธะปั | ะะพะผะฐะฝะดะฐ `/profile` | ะะฝัะพัะผะฐัะธั ะพ ะฟัะพัะธะปะต |
| **ะกะฒะพะดะบะฐ** | ะกัะฐัะธััะธะบะฐ | ะะพะผะฐะฝะดะฐ `/progress` ะธะปะธ ะฟะพัะปะต ะทะฐะฒะตััะตะฝะธั ะดะฝั | ะัะพะณัะตัั ะฟะพ ะฝะตะดะตะปัะผ |
| **ะกะปัะถะตะฑะฝะพะต** | ะะพะดัะฒะตัะถะดะตะฝะธะต | ะะพัะปะต ะบะฐะถะดะพะณะพ ะพัะฒะตัะฐ | "โ ะัะธะฝััะพ" |
| **ะกะปัะถะตะฑะฝะพะต** | ะัะธะฑะบะฐ | ะัะธ ะพัะธะฑะบะต | "โ๏ธ ะขะตัะฝะธัะตัะบะธะต ะฝะตะฟะพะปะฐะดะบะธ" |

### ะั ะฃัะตะฝะธะบะฐ ะบ ะฑะพัั

| ะขะธะฟ | FSM-ัะพััะพัะฝะธะต | ะะฐะปะธะดะฐัะธั | ะัะธะผะตั |
|-----|---------------|-----------|--------|
| **ะัะฒะตั ะฝะฐ ััะพะบ** | `waiting_for_answer` ะธะปะธ fallback | โฅ20 ัะธะผะฒะพะปะพะฒ | "ะะฐะทะฒะธัะธะต โ ััะพ..." |
| **ะัะฒะตั ะฝะฐ ะฑะพะฝัั** | `waiting_for_bonus_answer` | โฅ20 ัะธะผะฒะพะปะพะฒ | "ะ ะผะพะตะน ัะฐะฑะพัะต ััะพ ะฟัะพัะฒะปัะตััั..." |
| **ะัะฒะตั ะฝะฐ ะทะฐะดะฐะฝะธะต** | `waiting_for_work_product` ะธะปะธ fallback | โฅ3 ัะธะผะฒะพะปะฐ | "ะกะฟะธัะพะบ ะฒ ะทะฐะผะตัะบะฐั" |
| **ะะพะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั** | ะปัะฑะพะต (ะฝะฐัะธะฝะฐะตััั ั `?`) | โ | "?ะงัะพ ัะฐะบะพะต ัะพะฑัะฐะฝะฝะพััั?" |

---

## 5. ะกะพััะฐะฝัะตะผัะต ะดะฐะฝะฝัะต

### ะัะธ ะพัะฒะตัะต ะฝะฐ ััะพะบ

**ะขะฐะฑะปะธัะฐ `answers`:**
```sql
INSERT INTO answers (
    chat_id, topic_index, answer_type, answer,
    complexity_level, mode, created_at
) VALUES (
    123456, 0, 'theory_answer', 'ะขะตะบัั ะพัะฒะตัะฐ...',
    2, 'marathon', NOW()
)
```

**ะขะฐะฑะปะธัะฐ `activity_log`:**
```sql
INSERT INTO activity_log (
    chat_id, activity_date, activity_type, mode, reference_id
) VALUES (
    123456, '2026-01-22', 'theory_answer', 'marathon', 1
)
```

**ะขะฐะฑะปะธัะฐ `interns` (ะพะฑะฝะพะฒะปะตะฝะธะต):**
```sql
UPDATE interns SET
    completed_topics = completed_topics || '[0]',
    topics_today = topics_today + 1,
    last_topic_date = '2026-01-22',
    topics_at_current_complexity = topics_at_current_complexity + 1,
    active_days_total = active_days_total + 1,
    active_days_streak = ...,
    last_active_date = '2026-01-22'
WHERE chat_id = 123456
```

### ะัะธ ะพัะฒะตัะต ะฝะฐ ะทะฐะดะฐะฝะธะต

**ะขะฐะฑะปะธัะฐ `answers`:**
```sql
INSERT INTO answers (
    chat_id, topic_index, answer_type, answer, mode
) VALUES (
    123456, 1, 'work_product', '[ะะ] ะกะฟะธัะพะบ ะฒ ะทะฐะผะตัะบะฐั', 'marathon'
)
```

### ะัะธ ะพัะฒะตัะต ะฝะฐ ะฑะพะฝัั

**ะขะฐะฑะปะธัะฐ `answers`:**
```sql
INSERT INTO answers (
    chat_id, topic_index, answer_type, answer,
    complexity_level, mode
) VALUES (
    123456, 0, 'bonus_answer', '[BONUS] ะะพะน ะฐะฝะฐะปะธะท...',
    3, 'marathon'
)
```

---

## 6. ะัะพะณัะตัั ะธ ััะฐัะธััะธะบะฐ

### ะะพะปั ะฟัะพะณัะตััะฐ ะฒ `interns`

| ะะพะปะต | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|------|----------|--------|
| `completed_topics` | JSON ะผะฐััะธะฒ ะธะฝะดะตะบัะพะฒ | `[0, 1, 2, 3, 4, 5]` |
| `current_topic_index` | ะขะตะบััะฐั ัะตะผะฐ | `6` |
| `topics_today` | ะขะตะผ ะฟัะพะนะดะตะฝะพ ัะตะณะพะดะฝั | `2` |
| `last_topic_date` | ะะฐัะฐ ะฟะพัะปะตะดะฝะตะน ัะตะผั | `2026-01-22` |
| `marathon_status` | ะกัะฐััั ะผะฐัะฐัะพะฝะฐ | `active` |

### ะะพะปั ัะปะพะถะฝะพััะธ

| ะะพะปะต | ะะฟะธัะฐะฝะธะต | ะะธะฐะฟะฐะทะพะฝ |
|------|----------|----------|
| `complexity_level` | ะขะตะบััะธะน ััะพะฒะตะฝั | 1, 2, 3 |
| `topics_at_current_complexity` | ะขะตะผ ะฝะฐ ััะพะผ ััะพะฒะฝะต | 0-7 |

**ะะฒัะพะฟะพะฒััะตะฝะธะต**: ะฟะพัะปะต 7 ัะตะผ ะฝะฐ ััะพะฒะฝะต โ ะฟะตัะตัะพะด ะฝะฐ ัะปะตะดัััะธะน.

### ะะพะปั ะฐะบัะธะฒะฝะพััะธ

| ะะพะปะต | ะะฟะธัะฐะฝะธะต |
|------|----------|
| `active_days_total` | ะัะตะณะพ ะฐะบัะธะฒะฝัั ะดะฝะตะน |
| `active_days_streak` | ะขะตะบััะฐั ัะตัะธั |
| `longest_streak` | ะัััะฐั ัะตัะธั |
| `last_active_date` | ะะพัะปะตะดะฝัั ะฐะบัะธะฒะฝะพััั |

---

## 7. ะัะพะฑัะต ัะพััะพัะฝะธั

### ะะฝะตะฒะฝะพะน ะปะธะผะธั ะธััะตัะฟะฐะฝ

```
ะฃัะตะฝะธะบ โ /learn (ะฟะพัะปะต 4 ัะตะผ ะทะฐ ะดะตะฝั)

ะะพั โ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
      "๐ฏ ะกะตะณะพะดะฝั ะฒั ัะถะต ะฟัะพัะปะธ 4 ัะตะผั โ ััะพ ะผะฐะบัะธะผัะผ!"
      "ะะพะทะฒัะฐัะฐะนัะตัั ะทะฐะฒััะฐ."
```

### ะขะตะผะฐ ะฟัะพะฟััะตะฝะฐ

```
ะฃัะตะฝะธะบ โ /skip

ะะพั โ ะกะปัะถะตะฑะฝะพะต: ะะพะดัะฒะตัะถะดะตะฝะธะต
      "โญ ะขะตะผะฐ ะฟัะพะฟััะตะฝะฐ: {ะฝะฐะทะฒะฐะฝะธะต}"
      "ะัะพะฟััะตะฝะฝัะต ัะตะผั ะฝะต ะทะฐััะธััะฒะฐัััั."
```

### ะะฐะฟะพะผะธะฝะฐะฝะธั

| ะัะตะผั | ะกะพะพะฑัะตะฝะธะต |
|-------|-----------|
| schedule_time + 1ั | "โฐ ะะตะฝั N ะผะฐัะฐัะพะฝะฐ ะถะดัั ะฒะฐั! /learn" |
| schedule_time + 3ั | "๐ ะะพัะปะตะดะฝะตะต ะฝะฐะฟะพะผะธะฝะฐะฝะธะต. ะะฐะถะต 15 ะผะธะฝัั โ ััะพ ะฟัะพะณัะตัั." |

### ะะฝะดะธะบะฐัะธั ัะพััะพัะฝะธั

ะะฐะถะดะพะต ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ, ะพะถะธะดะฐััะตะต ะพัะฒะตัะฐ, ัะพะดะตัะถะธั ะฟะพะดัะบะฐะทะบั ะพ ัะตะบััะตะผ ัะพััะพัะฝะธะธ:

```
๐ญ ะะพะฟัะพั ะดะปั ัะฐะทะผััะปะตะฝะธั...

_ะะฐะฟะธัะธัะต ะพัะฒะตั ะฒ ัะพะพะฑัะตะฝะธะธ..._

๐ฌ *ะะถะธะดะฐั:* ะฒะฐั ะพัะฒะตั ะฝะฐ ะฒะพะฟัะพั (โฅ20 ัะธะผะฒะพะปะพะฒ)
_ะงัะพะฑั ะทะฐะดะฐัั ะฒะพะฟัะพั ะบ ะะ, ะฝะฐัะฝะธัะต ัะพะพะฑัะตะฝะธะต ั ?_
```

ะะปั ะฟัะฐะบัะธะบะธ:
```
๐ *ะะพะณะดะฐ ะฒัะฟะพะปะฝะธัะต ะทะฐะดะฐะฝะธะต:*...

๐ฌ *ะะถะธะดะฐั:* ะฝะฐะทะฒะฐะฝะธะต ัะฐะฑะพัะตะณะพ ะฟัะพะดัะบัะฐ (โฅ3 ัะธะผะฒะพะปะพะฒ)
_ะงัะพะฑั ะทะฐะดะฐัั ะฒะพะฟัะพั ะบ ะะ, ะฝะฐัะฝะธัะต ัะพะพะฑัะตะฝะธะต ั ?_
```

### ะะพะฟัะพัั ะบ ะะ (ะฟัะตัะธะบั ?)

ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะทะฐะดะฐัั ะฒะพะฟัะพั ะบ ะะ ะฒ ะปัะฑะพะน ะผะพะผะตะฝั, ะฝะฐัะฐะฒ ัะพะพะฑัะตะฝะธะต ั `?`:

```
ะฃัะตะฝะธะบ โ ?ะงัะพ ัะฐะบะพะต ัะพััะพัะฝะธะต ัะฐะพัะฐ?

ะะพั โ [ะะพะฝััะปััะฐัะธั ัะตัะตะท Claude + MCP]
      "ะกะพััะพัะฝะธะต ัะฐะพัะฐ โ ััะพ..."
```

ะะพั ะพะฑัะฐะฑะฐััะฒะฐะตั ะฒะพะฟัะพั ะธ ะฒะพะทะฒัะฐัะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะบ ะพะถะธะดะฐะฝะธั ะพัะฒะตัะฐ.

### Fallback ะฟัะธ ะฟะพัะตัะต FSM-ัะพััะพัะฝะธั

ะัะปะธ FSM-ัะพััะพัะฝะธะต ะฟะพัะตััะฝะพ (ะฟะตัะตะทะฐะฟััะบ ะฑะพัะฐ, ะพัะธะฑะบะฐ), ะฑะพั ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐะตั ะบะพะฝัะตะบัั:

**ะะปั ััะพะบะฐ** (ัะตะพัะธั ะพัะฟัะฐะฒะปะตะฝะฐ, ะพัะฒะตั ะฝะต ะฟะพะปััะตะฝ):
```
ะฃัะตะฝะธะบ โ [ัะตะบัั โฅ20 ัะธะผะฒะพะปะพะฒ, ะฝะต ะฝะฐัะธะฝะฐะตััั ั ? ะธะปะธ /]

ะะพั โ โ ะัะฒะตั ะฟัะธะฝัั [fallback]
      โ ะะตัะตัะพะด ะบ ะฟัะฐะบัะธะบะต
```

**ะะปั ะฟัะฐะบัะธะบะธ** (ัะตะพัะธั ะฟัะพะนะดะตะฝะฐ, ะฟัะฐะบัะธะบะฐ ะพะถะธะดะฐะตั ะพัะฒะตั):
```
ะฃัะตะฝะธะบ โ [ัะตะบัั โฅ3 ัะธะผะฒะพะปะพะฒ, ะฝะต ะฝะฐัะธะฝะฐะตััั ั ? ะธะปะธ /]

ะะพั โ โ ะัะฐะบัะธะบะฐ ะทะฐััะธัะฐะฝะฐ [fallback]
      โ ะะตะฝั ะทะฐะฒะตัััะฝ
```

---

## 8. ะะฐะฒะตััะตะฝะธะต ะะฐัะฐัะพะฝะฐ

### ะฃัะปะพะฒะธะต

```python
len(completed_topics) >= 28
```

### ะคะธะฝะฐะปัะฝะพะต ัะพะพะฑัะตะฝะธะต

```
ะฃัะตะฝะธะบ โ /learn (ะฟะพัะปะต 28 ัะตะผ)

ะะพั โ ะกะฒะพะดะบะฐ: ะกัะฐัะธััะธะบะฐ
      "๐ ะะพะทะดัะฐะฒะปัะตะผ! ะะฐัะฐัะพะฝ ะฟัะพะนะดะตะฝ!"

      "ะั ะฟัะพัะปะธ ะฒัะต 14 ะดะฝะตะน ะธ 28 ัะตะผ."

      "๐ ะะฐัะฐ ััะฐัะธััะธะบะฐ:"
      "1๏ธโฃ ะะตะดะตะปั 1: โโโโโโโโโโ 14/14 โ"
      "2๏ธโฃ ะะตะดะตะปั 2: โโโโโโโโโโ 14/14 โ"

      "ะขะตะฟะตัั ะฒั โ ะัะฐะบัะธะบัััะธะน ััะตะฝะธะบ ั ะฑะฐะทะพะฒัะผะธ ะฟัะฐะบัะธะบะฐะผะธ:"
      "โข ะกะปะพัั ัะฐะผะพัะฐะทะฒะธัะธั"
      "โข ะขัะตะบะตั ะฟัะฐะบัะธะบ"
      "โข ะะธะผะพะปััะฝัะต ะทะฐะผะตัะบะธ"
      "โข ะะฐะฑะพัะธะต ะฟัะพะดัะบัั"
```

### ะะฑะฝะพะฒะปะตะฝะธะต ััะฐัััะฐ

```sql
UPDATE interns SET marathon_status = 'completed' WHERE chat_id = 123456
```

---

## 9. ะะธะฐะณัะฐะผะผะฐ ะดะฐะฝะฝัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      ะะะะะะะะะ                              โ
โ  /start โ 8 ัะฐะณะพะฒ โ interns (ะฟัะพัะธะปั ัะพะทะดะฐะฝ)                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      ะะะะฌ ะะะะะคะะะ                          โ
โ                                                             โ
โ  /learn โโโโโโฌโโโบ ะฃัะพะบ โโโโบ answers (theory_answer)         โ
โ              โ              activity_log                    โ
โ              โ              interns.completed_topics +1     โ
โ              โ                                              โ
โ              โโโโบ ะะพะฝัั โโโบ answers (bonus_answer)          โ
โ              โ              (ะพะฟัะธะพะฝะฐะปัะฝะพ)                   โ
โ              โ                                              โ
โ              โโโโบ ะะฐะดะฐะฝะธะต โบ answers (work_product)          โ
โ                             activity_log                    โ
โ                             interns.completed_topics +1     โ
โ                             interns.topics_today +1         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      ะะะะะะจะะะะ                             โ
โ  completed_topics.length == 28                              โ
โ  โ marathon_status = 'completed'                            โ
โ  โ ะคะธะฝะฐะปัะฝะพะต ัะพะพะฑัะตะฝะธะต                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 10. ะะปััะตะฒัะต ัะฐะนะปั

| ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต |
|------|-----------|
| `bot.py` | ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ ะผะฐัะฐัะพะฝะฐ |
| `db/models.py` | ะกัะตะผะฐ ะะ |
| `db/queries/users.py` | ะะฐะฑะพัะฐ ั ะฟัะพัะธะปัะผะธ |
| `db/queries/answers.py` | ะกะพััะฐะฝะตะฝะธะต ะพัะฒะตัะพะฒ |
| `db/queries/activity.py` | ะััะปะตะถะธะฒะฐะฝะธะต ะฐะบัะธะฒะฝะพััะธ |
| `knowledge_structure.yaml` | ะกัััะบัััะฐ 28 ัะตะผ |
| `locales.py` | ะขะตะบััั ะธะฝัะตััะตะนัะฐ |

---

## ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน

| ะะฐัะฐ | ะะทะผะตะฝะตะฝะธะต |
|------|-----------|
| 2026-01-22 | ะกะพะทะดะฐะฝะธะต ะดะพะบัะผะตะฝัะฐ |
